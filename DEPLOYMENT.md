# تعليمات نشر نظام إدارة الاشتراكات على استضافة Namecheap

## 1. إعداد قاعدة البيانات MySQL

1. قم بتسجيل الدخول إلى لوحة تحكم cPanel الخاصة بك
2. انتقل إلى قسم "Databases" واضغط على "MySQL Databases"
3. قم بإنشاء قاعدة بيانات جديدة:
   - أدخل اسم قاعدة البيانات (مثلاً: `teckx_subscription`)
   - اضغط على "Create Database"
4. قم بإنشاء مستخدم لقاعدة البيانات:
   - أدخل اسم المستخدم (مثلاً: `teckx_admin`)
   - أدخل كلمة مرور قوية
   - اضغط على "Create User"
5. قم بربط المستخدم بقاعدة البيانات:
   - اختر قاعدة البيانات والمستخدم من القوائم المنسدلة
   - امنح المستخدم كافة الصلاحيات (ALL PRIVILEGES)
   - اضغط على "Add"

## 2. تعديل ملفات الإعداد

1. قم بتعديل ملف `server/.env` بمعلومات قاعدة البيانات الخاصة بك:
   ```
   DB_HOST=localhost
   DB_USER=your_db_username
   DB_PASSWORD=your_db_password
   DB_NAME=your_db_name
   JWT_SECRET=your_jwt_secret
   ```

2. قم بتعديل ملف `.cpanel.yml` لتحديد المسار الصحيح للنشر:
   - قم بتغيير `username` إلى اسم المستخدم الخاص بك على الاستضافة

## 3. بناء المشروع

1. قم بتنفيذ الأمر التالي لبناء المشروع:
   ```
   npm run build
   ```

2. قم بتنفيذ الأمر التالي لبناء الخادم:
   ```
   cd server && npm run build && cd ..
   ```

3. قم بإنشاء حزمة النشر:
   ```
   bash deploy.sh
   ```

## 4. رفع المشروع إلى الاستضافة

### الطريقة 1: باستخدام Git (إذا كان متاحًا على استضافتك)

1. قم بإنشاء مستودع Git على استضافتك
2. قم بإضافة المستودع كمصدر بعيد:
   ```
   git remote add cpanel ssh://username@hostname:port/path/to/repository
   ```
3. قم بدفع التغييرات:
   ```
   git push cpanel main
   ```

### الطريقة 2: باستخدام FTP

1. قم بتسجيل الدخول إلى حسابك على Namecheap باستخدام FTP
2. قم برفع محتويات مجلد `build` إلى المجلد `public_html`
3. قم بإنشاء مجلد `api` داخل `public_html`
4. قم برفع محتويات مجلد `server/dist` إلى المجلد `api`
5. قم برفع ملف `server/package.json` إلى المجلد `api`
6. قم برفع ملف `server/.env` إلى المجلد `api`
7. قم برفع ملف `.htaccess` إلى المجلد `public_html`

### الطريقة 3: باستخدام حزمة النشر

1. قم بتسجيل الدخول إلى لوحة تحكم cPanel
2. انتقل إلى "File Manager" وافتح مجلد `public_html`
3. قم برفع ملف `deploy.zip` إلى هذا المجلد
4. قم باستخراج الملف باستخدام خيار "Extract" في cPanel

## 5. تثبيت اعتماديات الخادم

1. قم بتسجيل الدخول إلى الاستضافة باستخدام SSH (إذا كان متاحًا)
2. انتقل إلى مجلد `public_html/api`:
   ```
   cd ~/public_html/api
   ```
3. قم بتثبيت الاعتماديات:
   ```
   npm install --production
   ```

## 6. إعداد قاعدة البيانات

1. قم بتنفيذ سكريبت إعداد قاعدة البيانات:
   ```
   cd ~/public_html/api
   node dist/db/setup.js
   ```

## 7. إعداد Node.js Application

1. قم بتسجيل الدخول إلى لوحة تحكم cPanel
2. انتقل إلى "Setup Node.js App"
3. قم بإنشاء تطبيق Node.js جديد:
   - المسار: `/api`
   - نقطة الدخول: `dist/index.js`
   - إصدار Node.js: اختر أحدث إصدار متاح
   - بيئة: `production`
   - اضغط على "Create"

## 8. اختبار النظام

1. قم بزيارة موقعك: `https://teckx.online`
2. تأكد من أن واجهة المستخدم تعمل بشكل صحيح
3. تأكد من أن API يعمل بشكل صحيح: `https://teckx.online/api`
4. قم بتسجيل الدخول باستخدام حساب المسؤول:
   - البريد الإلكتروني: `admin@example.com`
   - كلمة المرور: `admin123`

## ملاحظات هامة

- تأكد من تغيير كلمة مرور المسؤول الافتراضية بعد تسجيل الدخول الأول
- تأكد من تعيين قيمة آمنة لـ `JWT_SECRET` في ملف `.env`
- قم بإعداد HTTPS لموقعك للحفاظ على أمان البيانات
- قم بإعداد نسخ احتياطية منتظمة لقاعدة البيانات